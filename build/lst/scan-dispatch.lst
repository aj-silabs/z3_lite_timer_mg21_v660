###############################################################################
#
# IAR ANSI C/C++ Compiler V8.32.2.178/W32 for ARM         14/Jun/2019  13:19:42
# Copyright 1999-2018 IAR Systems AB.
#
#    Cpu mode     =  
#    Endian       =  little
#    Source file  =  
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.6\protocol\zigbee\app\framework\plugin\scan-dispatch\scan-dispatch.c
#    Command line =  
#        -f C:\Users\alji\AppData\Local\Temp\EW195C.tmp
#        (C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.6\protocol\zigbee\app\framework\plugin\scan-dispatch\scan-dispatch.c
#        -D LOCAL_STORAGE_BTL -D CORTEXM3 -D CORTEXM3_EFR32 -D
#        CORTEXM3_EFR32_MICRO -D CORTEXM3_EFM32_MICRO -D
#        EFR32_SERIES2_CONFIG1_MICRO -D EFR32MG21 -D EFR32MG21A010F1024IM32 -D
#        "ATTRIBUTE_STORAGE_CONFIGURATION=\"z3_lite_timer_mg21_v660_endpoint_config.h\""
#        -D "CONFIGURATION_HEADER=\"app/framework/util/config.h\"" -D
#        "GENERATED_TOKEN_HEADER=\"z3_lite_timer_mg21_v660_tokens.h\"" -D
#        "PLATFORM_HEADER=\"platform/base/hal/micro/cortexm3/compiler/iar.h\""
#        -D "ZA_GENERATED_HEADER=\"z3_lite_timer_mg21_v660.h\"" -D
#        "__SOURCEFILE__=\"scan-dispatch.c\"" -D PSSTORE_SIZE=0 -D
#        LONGTOKEN_SIZE=0 -D LOCKBITS_IN_MAINFLASH_SIZE=8192 -D HAL_CONFIG=1 -D
#        EMBER_AF_USE_HWCONF -D LED_BLINK_PERIOD_MS=1000 -D NO_LED=1 -D
#        "EMBER_AF_API_EMBER_TYPES=\"stack/include/ember-types.h\"" -D
#        "EMBER_AF_API_DEBUG_PRINT=\"app/framework/util/print.h\"" -D
#        "EMBER_AF_API_AF_HEADER=\"app/framework/include/af.h\"" -D
#        "EMBER_AF_API_AF_SECURITY_HEADER=\"app/framework/security/af-security.h\""
#        -D EMBER_STACK_ZIGBEE -D
#        "MBEDTLS_CONFIG_FILE=\"mbedtls-config-generated.h\"" -D USE_NVM3 -D
#        NVM3_DEFAULT_NVM_SIZE=NVM3_FLASH_PAGES*FLASH_PAGE_SIZE -D
#        EMLIB_USER_CONFIG -D HAL_BULBPWM_ENABLE=1 -D
#        HAL_BULBPWM_FREQUENCY=1000 -D
#        "APPLICATION_TOKEN_HEADER=\"znet-token.h\"" -D
#        "APPLICATION_MFG_TOKEN_HEADER=\"znet-mfg-token.h\"" -D
#        "MBEDTLS_DEVICE_ACCELERATION_CONFIG_FILE=\"configs/config-device-acceleration.h\""
#        -D
#        "MBEDTLS_DEVICE_ACCELERATION_CONFIG_APP_FILE=\"config-device-acceleration-app.h\""
#        -D NVM3_FLASH_PAGES=4 -D NVM3_DEFAULT_CACHE_SIZE=200 -D
#        NVM3_MAX_OBJECT_SIZE=254 -D NVM3_DEFAULT_REPACK_HEADROOM=0 -D
#        PHY_RAIL=1 -lC
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\build\lst
#        --diag_suppress Pa050 -o
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\build\obj
#        --no_unroll --no_clustering --debug --endian=little
#        --cpu=Cortex-M33.no_dsp --cmse --no_path_in_file_macros
#        --separate_cluster_for_initialized_variables -e --fpu=None
#        --dlib_config "C:\Program Files (x86)\IAR Systems\Embedded Workbench
#        8.2\arm\inc\c\DLib_Config_Normal.h" -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.6\protocol\zigbee\app\framework\plugin\scan-dispatch\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\..\..\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\..\..\stack\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\..\util\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\include\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\plugin\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\micro\cortexm3\efm32\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\micro\cortexm3\efm32\config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\micro\cortexm3\efm32\efr32\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\CMSIS\Include\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\Device\SiliconLabs\efr32mg21\Include\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\common\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\dmadrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\gpiointerrupt\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\rtcdrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\sleep\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\spidrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\tempdrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\uartdrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\ustimer\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emlib\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\middleware\glib\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\middleware\glib\glib\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\radio\rail_lib\plugin\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\radio\rail_lib\chip\efr32\rf\common\cortex\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\radio\rail_lib\chip\efr32\rf\rfprotocol\ieee802154\cortex\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\halconfig\inc\hal-config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\hardware\module\config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\hardware\kit\common\halconfig\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\hardware\kit\common\bsp\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\hal-config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\bootloader\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\emdrv\nvm3\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\chip\efr32\efr32xg2x\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\common\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\plugin\coexistence\common\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\plugin\coexistence\hal\efr32\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\plugin\coexistence\protocol\ieee802154\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\protocol\ble\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\protocol\ieee802154\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\protocol\zwave\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\plugin\plugin-common\mbedtls\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\third_party\mbedtls\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\third_party\mbedtls\include\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\third_party\mbedtls\include\mbedtls\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\third_party\mbedtls\sl_crypto\include\
#        -Ohz --use_c++_inline)
#    Locale       =  C
#    List file    =  
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\build\lst\scan-dispatch.lst
#    Object file  =  
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\build\obj\scan-dispatch.o
#
###############################################################################

C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.6\protocol\zigbee\app\framework\plugin\scan-dispatch\scan-dispatch.c
      1          /***************************************************************************//**
      2           * @file
      3           * @brief Dispatching 802.15.4 scan results to interested parties.
      4           *******************************************************************************
      5           * # License
      6           * <b>Copyright 2018 Silicon Laboratories Inc. www.silabs.com</b>
      7           *******************************************************************************
      8           *
      9           * The licensor of this software is Silicon Laboratories Inc. Your use of this
     10           * software is governed by the terms of Silicon Labs Master Software License
     11           * Agreement (MSLA) available at
     12           * www.silabs.com/about-us/legal/master-software-license-agreement. This
     13           * software is distributed to you in Source Code format and is governed by the
     14           * sections of the MSLA applicable to Source Code.
     15           *
     16           ******************************************************************************/
     17          
     18          #include "app/framework/include/af.h"
     19          
     20          #include "scan-dispatch.h"
     21          
     22          // -----------------------------------------------------------------------------
     23          // Global variables
     24          

   \                                 In section .bss, align 4
     25          EmberEventControl emberAfPluginScanDispatchScanEventControl;
   \                     emberAfPluginScanDispatchScanEventControl:
   \        0x0                      DS8 8
     26          
     27          // -----------------------------------------------------------------------------
     28          // Internal implementation elements
     29          

   \                                 In section .bss, align 1
     30          static uint8_t head = 0;
   \                     head:
   \        0x0                      DS8 1

   \                                 In section .bss, align 1
     31          static uint8_t tail = 0;
   \                     tail:
   \        0x0                      DS8 1

   \                                 In section .bss, align 1
     32          static uint8_t count = 0;
   \                     count:
   \        0x0                      DS8 1

   \                                 In section .bss, align 4
     33          static EmberAfPluginScanDispatchScanData handlerQueue[EMBER_AF_PLUGIN_SCAN_DISPATCH_SCAN_QUEUE_SIZE];
   \                     handlerQueue:
   \        0x0                      DS8 160
     34          #define handlerQueueIsEmpty() (!count)
     35          #define handlerQueueIsFull()  (count == EMBER_AF_PLUGIN_SCAN_DISPATCH_SCAN_QUEUE_SIZE)
     36          
     37          // We save 12 bytes of text by having this as a function.

   \                                 In section .text, align 2, keep-with-next
     38          static uint8_t handlerQueueNextIndex(uint8_t i)
     39          {
     40            return (++i % EMBER_AF_PLUGIN_SCAN_DISPATCH_SCAN_QUEUE_SIZE);
   \                     handlerQueueNextIndex: (+1)
   \        0x0   0x1C40             ADDS     R0,R0,#+1
   \        0x2   0xB2C0             UXTB     R0,R0
   \        0x4   0x220A             MOVS     R2,#+10
   \        0x6   0xFB90 0xF2F2      SDIV     R2,R0,R2
   \        0xA   0x210A             MOVS     R1,#+10
   \        0xC   0xFB01 0x0012      MLS      R0,R1,R2,R0
   \       0x10   0xB2C0             UXTB     R0,R0
   \       0x12   0x4770             BX       LR               ;; return
     41          }
     42          

   \                                 In section .text, align 2, keep-with-next
     43          static void maybeCallNextHandler(uint8_t statusOrRssi,
     44                                           uint8_t channelOrLqi,
     45                                           EmberNetworkScanType scanType,
     46                                           bool isComplete,
     47                                           bool isFailure,
     48                                           EmberZigbeeNetwork *network)
     49          {
   \                     maybeCallNextHandler: (+1)
   \        0x0   0xB53E             PUSH     {R1-R5,LR}
     50            if (!handlerQueueIsEmpty()) {
   \        0x2   0x....             LDR.N    R5,??DataTable5
   \        0x4   0x782C             LDRB     R4,[R5, #+0]
   \        0x6   0xB1F4             CBZ.N    R4,??maybeCallNextHandler_0
   \        0x8   0x9D07             LDR      R5,[SP, #+28]
     51              EmberAfPluginScanDispatchScanResults results = {
     52                .status = statusOrRssi,
     53                .rssi = statusOrRssi,
     54                .channel = channelOrLqi,
     55                .lqi = channelOrLqi,
     56                .network = network,
     57                .mask = (scanType
     58                         | (isComplete
     59                            ? EM_AF_PLUGIN_SCAN_DISPATCH_SCAN_RESULTS_MASK_COMPLETE
     60                            : 0)
     61                         | (isFailure
     62                            ? EM_AF_PLUGIN_SCAN_DISPATCH_SCAN_RESULTS_MASK_FAILURE
     63                            : 0)),
     64              };
   \        0xA   0xF88D 0x0000      STRB     R0,[SP, #+0]
   \        0xE   0xF88D 0x0001      STRB     R0,[SP, #+1]
   \       0x12   0x2B00             CMP      R3,#+0
   \       0x14   0x9806             LDR      R0,[SP, #+24]
   \       0x16   0xF88D 0x1002      STRB     R1,[SP, #+2]
   \       0x1A   0xF88D 0x1003      STRB     R1,[SP, #+3]
   \       0x1E   0x9501             STR      R5,[SP, #+4]
   \       0x20   0xBF14             ITE      NE 
   \       0x22   0xF44F 0x7180      MOVNE    R1,#+256
   \       0x26   0x2100             MOVEQ    R1,#+0
   \       0x28   0xB108             CBZ.N    R0,??maybeCallNextHandler_1
   \       0x2A   0xF44F 0x7000      MOV      R0,#+512
   \                     ??maybeCallNextHandler_1: (+1)
   \       0x2E   0x430A             ORRS     R2,R1,R2
   \       0x30   0x4302             ORRS     R2,R0,R2
   \       0x32   0xF8AD 0x2008      STRH     R2,[SP, #+8]
     65              handlerQueue[head].handler(&results);
   \       0x36   0x....             LDR.N    R2,??DataTable5_1
   \       0x38   0x7813             LDRB     R3,[R2, #+0]
   \       0x3A   0x....             LDR.N    R1,??DataTable5_2
   \       0x3C   0x4668             MOV      R0,SP
   \       0x3E   0xEB01 0x1403      ADD      R4,R1,R3, LSL #+4
   \       0x42   0x68E1             LDR      R1,[R4, #+12]
   \       0x44   0x4788             BLX      R1
     66            }
     67          }
   \                     ??maybeCallNextHandler_0: (+1)
   \       0x46   0xBD37             POP      {R0-R2,R4,R5,PC}  ;; return
     68          
     69          // -----------------------------------------------------------------------------
     70          // Public API
     71          

   \                                 In section .text, align 2, keep-with-next
     72          EmberStatus emberAfPluginScanDispatchScheduleScan(EmberAfPluginScanDispatchScanData *data)
     73          {
   \                     emberAfPluginScanDispatchScheduleScan: (+1)
   \        0x0   0xB5F8             PUSH     {R3-R7,LR}
     74            EmberStatus status = EMBER_ERR_FATAL;
     75          
     76            if (!handlerQueueIsFull()) {
   \        0x2   0x....             LDR.N    R5,??DataTable5
   \        0x4   0x782E             LDRB     R6,[R5, #+0]
   \        0x6   0x2401             MOVS     R4,#+1
   \        0x8   0x4601             MOV      R1,R0
   \        0xA   0x2E0A             CMP      R6,#+10
   \        0xC   0xD011             BEQ.N    ??emberAfPluginScanDispatchScheduleScan_0
     77              handlerQueue[tail] = *data;
   \        0xE   0x....             LDR.N    R4,??DataTable5_3
   \       0x10   0x7827             LDRB     R7,[R4, #+0]
   \       0x12   0x....             LDR.N    R2,??DataTable5_2
     78              tail = handlerQueueNextIndex(tail);
   \       0x14   0x1C76             ADDS     R6,R6,#+1
   \       0x16   0xEB02 0x1007      ADD      R0,R2,R7, LSL #+4
   \       0x1A   0x2210             MOVS     R2,#+16
   \       0x1C   0x....'....        BL       __aeabi_memcpy4
   \       0x20   0x4638             MOV      R0,R7
   \       0x22   0x....'....        BL       handlerQueueNextIndex
   \       0x26   0x7020             STRB     R0,[R4, #+0]
     79              count++;
   \       0x28   0x702E             STRB     R6,[R5, #+0]
     80              status = EMBER_SUCCESS;
     81              emberEventControlSetActive(emberAfPluginScanDispatchScanEventControl);
   \       0x2A   0x....             LDR.N    R0,??DataTable5_4
   \       0x2C   0x2400             MOVS     R4,#+0
   \       0x2E   0x....'....        BL       emEventControlSetActive
     82            }
     83          
     84            return status;
   \                     ??emberAfPluginScanDispatchScheduleScan_0: (+1)
   \       0x32   0x4620             MOV      R0,R4
   \       0x34   0xBDF2             POP      {R1,R4-R7,PC}    ;; return
     85          }
     86          

   \                                 In section .text, align 2, keep-with-next
     87          void emberAfPluginScanDispatchClear(void)
     88          {
   \                     emberAfPluginScanDispatchClear: (+1)
   \        0x0   0xB580             PUSH     {R7,LR}
     89            emberStopScan();
   \        0x2   0x....'....        BL       emberStopScan
     90            head = tail = count = 0;
   \        0x6   0x2000             MOVS     R0,#+0
   \        0x8   0x....             LDR.N    R1,??DataTable5
   \        0xA   0x7008             STRB     R0,[R1, #+0]
   \        0xC   0x....             LDR.N    R3,??DataTable5_3
   \        0xE   0x7018             STRB     R0,[R3, #+0]
   \       0x10   0x....             LDR.N    R1,??DataTable5_1
   \       0x12   0x7008             STRB     R0,[R1, #+0]
     91          }
   \       0x14   0xBD01             POP      {R0,PC}          ;; return
     92          
     93          // -----------------------------------------------------------------------------
     94          // Public callbacks
     95          

   \                                 In section .text, align 2, keep-with-next
     96          void emberAfPluginScanDispatchScanEventHandler(void)
     97          {
   \                     emberAfPluginScanDispatchScanEventHandler: (+1)
   \        0x0   0xB5FE             PUSH     {R1-R7,LR}
     98            EmberStatus status;
     99          
    100            emberEventControlSetInactive(emberAfPluginScanDispatchScanEventControl);
   \        0x2   0x....             LDR.N    R4,??DataTable5_4
   \        0x4   0x2100             MOVS     R1,#+0
   \        0x6   0x7021             STRB     R1,[R4, #+0]
    101          
    102            // If there is a handler in the queue, start a scan for it.
    103            // If we are already scanning, we should try again.
    104            // If there is an error, we abort the scan and tell the consumer.
    105            if (!handlerQueueIsEmpty()) {
   \        0x8   0x....             LDR.N    R5,??DataTable5
   \        0xA   0x7828             LDRB     R0,[R5, #+0]
   \        0xC   0xB310             CBZ.N    R0,??emberAfPluginScanDispatchScanEventHandler_0
    106              status = emberStartScan(handlerQueue[head].scanType,
    107                                      handlerQueue[head].channelMask,
    108                                      handlerQueue[head].duration);
   \        0xE   0x....             LDR.N    R6,??DataTable5_1
   \       0x10   0x7830             LDRB     R0,[R6, #+0]
   \       0x12   0x....             LDR.N    R7,??DataTable5_2
   \       0x14   0xEB07 0x1000      ADD      R0,R7,R0, LSL #+4
   \       0x18   0x7A02             LDRB     R2,[R0, #+8]
   \       0x1A   0x6841             LDR      R1,[R0, #+4]
   \       0x1C   0x7800             LDRB     R0,[R0, #+0]
   \       0x1E   0x....'....        BL       emberStartScan
    109              if (status != EMBER_MAC_SCANNING) {
   \       0x22   0x283D             CMP      R0,#+61
   \       0x24   0xD016             BEQ.N    ??emberAfPluginScanDispatchScanEventHandler_0
    110                if (status != EMBER_SUCCESS) {
   \       0x26   0x0001             MOVS     R1,R0
   \       0x28   0xD014             BEQ.N    ??emberAfPluginScanDispatchScanEventHandler_0
    111                  maybeCallNextHandler(status,
    112                                       0, // channel or LQI - meh
    113                                       handlerQueue[head].scanType,
    114                                       true,  // complete?
    115                                       true,  // failure?
    116                                       NULL); // network
   \       0x2A   0x2100             MOVS     R1,#+0
   \       0x2C   0x2201             MOVS     R2,#+1
   \       0x2E   0x9101             STR      R1,[SP, #+4]
   \       0x30   0x9200             STR      R2,[SP, #+0]
   \       0x32   0x7832             LDRB     R2,[R6, #+0]
   \       0x34   0x2301             MOVS     R3,#+1
   \       0x36   0xEA4F 0x1C02      LSL      R12,R2,#+4
   \       0x3A   0xF817 0x200C      LDRB     R2,[R7, R12]
   \       0x3E   0x....'....        BL       maybeCallNextHandler
    117                  head = handlerQueueNextIndex(head);
   \       0x42   0x7830             LDRB     R0,[R6, #+0]
   \       0x44   0x....'....        BL       handlerQueueNextIndex
   \       0x48   0x7030             STRB     R0,[R6, #+0]
    118                  count--;
   \       0x4A   0x7828             LDRB     R0,[R5, #+0]
   \       0x4C   0x1E41             SUBS     R1,R0,#+1
   \       0x4E   0x7029             STRB     R1,[R5, #+0]
    119                  emberEventControlSetActive(emberAfPluginScanDispatchScanEventControl);
   \       0x50   0x4620             MOV      R0,R4
   \       0x52   0x....             B.N      ?Subroutine1
    120                }
    121              }
    122            }
    123          }
   \                     ??emberAfPluginScanDispatchScanEventHandler_0: (+1)
   \       0x54   0xBDF7             POP      {R0-R2,R4-R7,PC}  ;; return

   \                                 In section .text, align 2, keep-with-next
   \                     ?Subroutine1: (+1)
   \        0x0   0xE8BD 0x40FE      POP      {R1-R7,LR}
   \        0x4   0x....'....        B.W      emEventControlSetActive
    124          

   \                                 In section .text, align 2, keep-with-next
    125          void emberAfEnergyScanResultCallback(uint8_t channel, int8_t rssi)
    126          {
   \                     emberAfEnergyScanResultCallback: (+1)
   \        0x0   0xB53E             PUSH     {R1-R5,LR}
   \        0x2   0x460C             MOV      R4,R1
    127            maybeCallNextHandler((uint8_t)rssi,
    128                                 channel,
    129                                 EMBER_ENERGY_SCAN,
    130                                 false,  // complete?
    131                                 false,  // failure?
    132                                 NULL);  // network
   \        0x4   0x2500             MOVS     R5,#+0
   \        0x6   0x4601             MOV      R1,R0
   \        0x8   0x9501             STR      R5,[SP, #+4]
   \        0xA   0x9500             STR      R5,[SP, #+0]
   \        0xC   0x2300             MOVS     R3,#+0
   \        0xE   0x2200             MOVS     R2,#+0
   \       0x10   0x....             B.N      ?Subroutine0
    133          }

   \                                 In section .text, align 2, keep-with-next
   \                     ?Subroutine0: (+1)
   \        0x0   0xB2E0             UXTB     R0,R4
   \        0x2   0x....'....        BL       maybeCallNextHandler
   \        0x6   0xBD37             POP      {R0-R2,R4,R5,PC}  ;; return
    134          

   \                                 In section .text, align 2, keep-with-next
    135          void emberAfNetworkFoundCallback(EmberZigbeeNetwork *networkFound,
    136                                           uint8_t lqi,
    137                                           int8_t rssi)
    138          {
   \                     emberAfNetworkFoundCallback: (+1)
   \        0x0   0xB53E             PUSH     {R1-R5,LR}
   \        0x2   0x4614             MOV      R4,R2
    139            maybeCallNextHandler((uint8_t)rssi,
    140                                 lqi,
    141                                 EMBER_ACTIVE_SCAN,
    142                                 false, // complete?
    143                                 false, // failure?
    144                                 networkFound);
   \        0x4   0x9001             STR      R0,[SP, #+4]
   \        0x6   0x2500             MOVS     R5,#+0
   \        0x8   0x9500             STR      R5,[SP, #+0]
   \        0xA   0x2300             MOVS     R3,#+0
   \        0xC   0x2201             MOVS     R2,#+1
   \        0xE                      REQUIRE ?Subroutine0
   \        0xE                      ;; // Fall through to label ?Subroutine0
    145          }
    146          

   \                                 In section .text, align 2, keep-with-next
    147          void emberAfScanCompleteCallback(uint8_t channel, EmberStatus status)
    148          {
   \                     emberAfScanCompleteCallback: (+1)
   \        0x0   0xB5FE             PUSH     {R1-R7,LR}
    149            maybeCallNextHandler(status,
    150                                 channel,
    151                                 handlerQueue[head].scanType,
    152                                 true,  // complete?
    153                                 false, // failure?
    154                                 NULL); // network
   \        0x2   0x....             LDR.N    R5,??DataTable5_1
   \        0x4   0x782F             LDRB     R7,[R5, #+0]
   \        0x6   0x460C             MOV      R4,R1
   \        0x8   0x2100             MOVS     R1,#+0
   \        0xA   0x9101             STR      R1,[SP, #+4]
   \        0xC   0x9100             STR      R1,[SP, #+0]
   \        0xE   0x....             LDR.N    R6,??DataTable5_2
   \       0x10   0x013F             LSLS     R7,R7,#+4
   \       0x12   0x5DF2             LDRB     R2,[R6, R7]
   \       0x14   0x4601             MOV      R1,R0
   \       0x16   0x2301             MOVS     R3,#+1
   \       0x18   0x4620             MOV      R0,R4
   \       0x1A   0x....'....        BL       maybeCallNextHandler
    155          
    156            // The scan is done when the status is set to EMBER_SUCCESS.
    157            // See documentation for the emberScanCompleteHandler callback.
    158            if (status == EMBER_SUCCESS && !handlerQueueIsEmpty()) {
   \       0x1E   0xB954             CBNZ.N   R4,??emberAfScanCompleteCallback_0
   \       0x20   0x....             LDR.N    R6,??DataTable5
   \       0x22   0x7834             LDRB     R4,[R6, #+0]
   \       0x24   0xB13C             CBZ.N    R4,??emberAfScanCompleteCallback_0
    159              head = handlerQueueNextIndex(head);
   \       0x26   0x7828             LDRB     R0,[R5, #+0]
   \       0x28   0x....'....        BL       handlerQueueNextIndex
   \       0x2C   0x7028             STRB     R0,[R5, #+0]
    160              count--;
   \       0x2E   0x1E60             SUBS     R0,R4,#+1
   \       0x30   0x7030             STRB     R0,[R6, #+0]
    161              emberEventControlSetActive(emberAfPluginScanDispatchScanEventControl);
   \       0x32   0x....             LDR.N    R0,??DataTable5_4
   \       0x34   0x....             B.N      ?Subroutine1
    162            }
    163          }
   \                     ??emberAfScanCompleteCallback_0: (+1)
   \       0x36   0xBDF7             POP      {R0-R2,R4-R7,PC}  ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5:
   \        0x0   0x....'....        DC32     count

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_1:
   \        0x0   0x....'....        DC32     head

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_2:
   \        0x0   0x....'....        DC32     handlerQueue

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_3:
   \        0x0   0x....'....        DC32     tail

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_4:
   \        0x0   0x....'....        DC32     emberAfPluginScanDispatchScanEventControl

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      24   emberAfEnergyScanResultCallback
        24   -> maybeCallNextHandler
      24   emberAfNetworkFoundCallback
        24   -> maybeCallNextHandler
       8   emberAfPluginScanDispatchClear
         8   -> emberStopScan
      32   emberAfPluginScanDispatchScanEventHandler
         0   -> emEventControlSetActive
        32   -> emberStartScan
        32   -> handlerQueueNextIndex
        32   -> maybeCallNextHandler
      24   emberAfPluginScanDispatchScheduleScan
        24   -> __aeabi_memcpy4
        24   -> emEventControlSetActive
        24   -> handlerQueueNextIndex
      32   emberAfScanCompleteCallback
         0   -> emEventControlSetActive
        32   -> handlerQueueNextIndex
        32   -> maybeCallNextHandler
       0   handlerQueueNextIndex
      24   maybeCallNextHandler
        24   -- Indirect call


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable5
       4  ??DataTable5_1
       4  ??DataTable5_2
       4  ??DataTable5_3
       4  ??DataTable5_4
       8  ?Subroutine0
       8  ?Subroutine1
       1  count
      18  emberAfEnergyScanResultCallback
      14  emberAfNetworkFoundCallback
      22  emberAfPluginScanDispatchClear
       8  emberAfPluginScanDispatchScanEventControl
      86  emberAfPluginScanDispatchScanEventHandler
      54  emberAfPluginScanDispatchScheduleScan
      56  emberAfScanCompleteCallback
     160  handlerQueue
      20  handlerQueueNextIndex
       1  head
      72  maybeCallNextHandler
       1  tail

 
 171 bytes in section .bss
 378 bytes in section .text
 
 378 bytes of CODE memory
 171 bytes of DATA memory

Errors: none
Warnings: none
