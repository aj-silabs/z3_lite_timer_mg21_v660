###############################################################################
#
# IAR ANSI C/C++ Compiler V8.32.2.178/W32 for ARM         14/Jun/2019  13:20:14
# Copyright 1999-2018 IAR Systems AB.
#
#    Cpu mode     =  
#    Endian       =  little
#    Source file  =  
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.6\protocol\zigbee\app\framework\plugin\zll-scenes-server\zll-scenes-server.c
#    Command line =  
#        -f C:\Users\alji\AppData\Local\Temp\EW940E.tmp
#        (C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.6\protocol\zigbee\app\framework\plugin\zll-scenes-server\zll-scenes-server.c
#        -D LOCAL_STORAGE_BTL -D CORTEXM3 -D CORTEXM3_EFR32 -D
#        CORTEXM3_EFR32_MICRO -D CORTEXM3_EFM32_MICRO -D
#        EFR32_SERIES2_CONFIG1_MICRO -D EFR32MG21 -D EFR32MG21A010F1024IM32 -D
#        "ATTRIBUTE_STORAGE_CONFIGURATION=\"z3_lite_timer_mg21_v660_endpoint_config.h\""
#        -D "CONFIGURATION_HEADER=\"app/framework/util/config.h\"" -D
#        "GENERATED_TOKEN_HEADER=\"z3_lite_timer_mg21_v660_tokens.h\"" -D
#        "PLATFORM_HEADER=\"platform/base/hal/micro/cortexm3/compiler/iar.h\""
#        -D "ZA_GENERATED_HEADER=\"z3_lite_timer_mg21_v660.h\"" -D
#        "__SOURCEFILE__=\"zll-scenes-server.c\"" -D PSSTORE_SIZE=0 -D
#        LONGTOKEN_SIZE=0 -D LOCKBITS_IN_MAINFLASH_SIZE=8192 -D HAL_CONFIG=1 -D
#        EMBER_AF_USE_HWCONF -D LED_BLINK_PERIOD_MS=1000 -D NO_LED=1 -D
#        "EMBER_AF_API_EMBER_TYPES=\"stack/include/ember-types.h\"" -D
#        "EMBER_AF_API_DEBUG_PRINT=\"app/framework/util/print.h\"" -D
#        "EMBER_AF_API_AF_HEADER=\"app/framework/include/af.h\"" -D
#        "EMBER_AF_API_AF_SECURITY_HEADER=\"app/framework/security/af-security.h\""
#        -D EMBER_STACK_ZIGBEE -D
#        "MBEDTLS_CONFIG_FILE=\"mbedtls-config-generated.h\"" -D USE_NVM3 -D
#        NVM3_DEFAULT_NVM_SIZE=NVM3_FLASH_PAGES*FLASH_PAGE_SIZE -D
#        EMLIB_USER_CONFIG -D HAL_BULBPWM_ENABLE=1 -D
#        HAL_BULBPWM_FREQUENCY=1000 -D
#        "APPLICATION_TOKEN_HEADER=\"znet-token.h\"" -D
#        "APPLICATION_MFG_TOKEN_HEADER=\"znet-mfg-token.h\"" -D
#        "MBEDTLS_DEVICE_ACCELERATION_CONFIG_FILE=\"configs/config-device-acceleration.h\""
#        -D
#        "MBEDTLS_DEVICE_ACCELERATION_CONFIG_APP_FILE=\"config-device-acceleration-app.h\""
#        -D NVM3_FLASH_PAGES=4 -D NVM3_DEFAULT_CACHE_SIZE=200 -D
#        NVM3_MAX_OBJECT_SIZE=254 -D NVM3_DEFAULT_REPACK_HEADROOM=0 -D
#        PHY_RAIL=1 -lC
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\build\lst
#        --diag_suppress Pa050 -o
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\build\obj
#        --no_unroll --no_clustering --debug --endian=little
#        --cpu=Cortex-M33.no_dsp --cmse --no_path_in_file_macros
#        --separate_cluster_for_initialized_variables -e --fpu=None
#        --dlib_config "C:\Program Files (x86)\IAR Systems\Embedded Workbench
#        8.2\arm\inc\c\DLib_Config_Normal.h" -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.6\protocol\zigbee\app\framework\plugin\zll-scenes-server\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\..\..\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\..\..\stack\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\..\util\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\include\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\plugin\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\micro\cortexm3\efm32\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\micro\cortexm3\efm32\config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\micro\cortexm3\efm32\efr32\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\CMSIS\Include\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\Device\SiliconLabs\efr32mg21\Include\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\common\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\dmadrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\gpiointerrupt\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\rtcdrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\sleep\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\spidrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\tempdrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\uartdrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\ustimer\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emlib\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\middleware\glib\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\middleware\glib\glib\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\radio\rail_lib\plugin\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\radio\rail_lib\chip\efr32\rf\common\cortex\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\radio\rail_lib\chip\efr32\rf\rfprotocol\ieee802154\cortex\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\halconfig\inc\hal-config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\hardware\module\config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\hardware\kit\common\halconfig\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\hardware\kit\common\bsp\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\hal-config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\bootloader\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\emdrv\nvm3\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\chip\efr32\efr32xg2x\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\common\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\plugin\coexistence\common\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\plugin\coexistence\hal\efr32\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\plugin\coexistence\protocol\ieee802154\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\protocol\ble\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\protocol\ieee802154\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\protocol\zwave\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\plugin\plugin-common\mbedtls\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\third_party\mbedtls\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\third_party\mbedtls\include\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\third_party\mbedtls\include\mbedtls\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\third_party\mbedtls\sl_crypto\include\
#        -Ohz --use_c++_inline)
#    Locale       =  C
#    List file    =  
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\build\lst\zll-scenes-server.lst
#    Object file  =  
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\build\obj\zll-scenes-server.o
#
###############################################################################

C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.6\protocol\zigbee\app\framework\plugin\zll-scenes-server\zll-scenes-server.c
      1          /***************************************************************************//**
      2           * @file
      3           * @brief Routines for the ZLL Scenes Server plugin.
      4           *******************************************************************************
      5           * # License
      6           * <b>Copyright 2018 Silicon Laboratories Inc. www.silabs.com</b>
      7           *******************************************************************************
      8           *
      9           * The licensor of this software is Silicon Laboratories Inc. Your use of this
     10           * software is governed by the terms of Silicon Labs Master Software License
     11           * Agreement (MSLA) available at
     12           * www.silabs.com/about-us/legal/master-software-license-agreement. This
     13           * software is distributed to you in Source Code format and is governed by the
     14           * sections of the MSLA applicable to Source Code.
     15           *
     16           ******************************************************************************/
     17          
     18          #include "../../include/af.h"
     19          #include "../scenes/scenes.h"
     20          
     21          #define ZCL_SCENES_CLUSTER_MODE_COPY_ALL_SCENES_MASK BIT(0)
     22          

   \                                 In section .text, align 2, keep-with-next
     23          bool emberAfScenesClusterEnhancedAddSceneCallback(uint16_t groupId,
     24                                                            uint8_t sceneId,
     25                                                            uint16_t transitionTime,
     26                                                            uint8_t *sceneName,
     27                                                            uint8_t *extensionFieldSets)
     28          {
   \                     emberAfScenesClusterEnhancedAddSceneCallback: (+1)
   \        0x0   0xB51C             PUSH     {R2-R4,LR}
   \        0x2   0x9C04             LDR      R4,[SP, #+16]
     29            return emberAfPluginScenesServerParseAddScene(emberAfCurrentCommand(),
     30                                                          groupId,
     31                                                          sceneId,
     32                                                          transitionTime,
     33                                                          sceneName,
     34                                                          extensionFieldSets);
   \        0x4   0x9300             STR      R3,[SP, #+0]
   \        0x6   0x4613             MOV      R3,R2
   \        0x8   0x9401             STR      R4,[SP, #+4]
   \        0xA   0x460A             MOV      R2,R1
   \        0xC   0x4601             MOV      R1,R0
   \        0xE   0x....             LDR.N    R4,??DataTable2
   \       0x10   0x6820             LDR      R0,[R4, #+0]
   \       0x12   0x....'....        BL       emberAfPluginScenesServerParseAddScene
   \       0x16   0xBD16             POP      {R1,R2,R4,PC}    ;; return
     35          }
     36          

   \                                 In section .text, align 2, keep-with-next
     37          bool emberAfScenesClusterEnhancedViewSceneCallback(uint16_t groupId,
     38                                                             uint8_t sceneId)
     39          {
   \                     emberAfScenesClusterEnhancedViewSceneCallback: (+1)
   \        0x0   0x460A             MOV      R2,R1
     40            return emberAfPluginScenesServerParseViewScene(emberAfCurrentCommand(),
     41                                                           groupId,
     42                                                           sceneId);
   \        0x2   0x4601             MOV      R1,R0
   \        0x4   0x....             LDR.N    R0,??DataTable2
   \        0x6   0x6800             LDR      R0,[R0, #+0]
   \        0x8   0x....'....        B.W      emberAfPluginScenesServerParseViewScene
     43          }
     44          

   \                                 In section .text, align 2, keep-with-next
     45          bool emberAfScenesClusterCopySceneCallback(uint8_t mode,
     46                                                     uint16_t groupIdFrom,
     47                                                     uint8_t sceneIdFrom,
     48                                                     uint16_t groupIdTo,
     49                                                     uint8_t sceneIdTo)
     50          {
   \                     emberAfScenesClusterCopySceneCallback: (+1)
   \        0x0   0xE92D 0x4FF7      PUSH     {R0-R2,R4-R11,LR}
   \        0x4   0xB094             SUB      SP,SP,#+80
   \        0x6   0x469A             MOV      R10,R3
     51            EmberStatus sendStatus;
     52            EmberAfStatus status = EMBER_ZCL_STATUS_INVALID_FIELD;
   \        0x8   0x2685             MOVS     R6,#+133
     53            bool copyAllScenes = (mode & ZCL_SCENES_CLUSTER_MODE_COPY_ALL_SCENES_MASK);
   \        0xA   0xF000 0x0401      AND      R4,R0,#0x1
     54            uint8_t i;
     55          
     56            emberAfScenesClusterPrintln("RX: CopyScene 0x%x, 0x%2x, 0x%x, 0x%2x, 0x%x",
     57                                        mode,
     58                                        groupIdFrom,
     59                                        sceneIdFrom,
     60                                        groupIdTo,
     61                                        sceneIdTo);
     62          
     63            // If a group id is specified but this endpoint isn't in it, take no action.
     64            if ((groupIdFrom != ZCL_SCENES_GLOBAL_SCENE_GROUP_ID
     65                 && !emberAfGroupsClusterEndpointInGroupCallback(emberAfCurrentEndpoint(),
     66                                                                 groupIdFrom))
     67                || (groupIdTo != ZCL_SCENES_GLOBAL_SCENE_GROUP_ID
     68                    && !emberAfGroupsClusterEndpointInGroupCallback(emberAfCurrentEndpoint(),
     69                                                                    groupIdTo))) {
   \        0xE   0x....             LDR.N    R5,??DataTable2
   \       0x10   0xB131             CBZ.N    R1,??emberAfScenesClusterCopySceneCallback_0
   \       0x12   0x682A             LDR      R2,[R5, #+0]
   \       0x14   0x6813             LDR      R3,[R2, #+0]
   \       0x16   0x7958             LDRB     R0,[R3, #+5]
   \       0x18   0x....'....        BL       emberAfGroupsClusterEndpointInGroupCallback
   \       0x1C   0x2800             CMP      R0,#+0
   \       0x1E   0xD009             BEQ.N    ??emberAfScenesClusterCopySceneCallback_1
   \                     ??emberAfScenesClusterCopySceneCallback_0: (+1)
   \       0x20   0xEA5F 0x000A      MOVS     R0,R10
   \       0x24   0xD007             BEQ.N    ??emberAfScenesClusterCopySceneCallback_2
   \       0x26   0x6828             LDR      R0,[R5, #+0]
   \       0x28   0x4651             MOV      R1,R10
   \       0x2A   0x6802             LDR      R2,[R0, #+0]
   \       0x2C   0x7950             LDRB     R0,[R2, #+5]
   \       0x2E   0x....'....        BL       emberAfGroupsClusterEndpointInGroupCallback
   \       0x32   0x2800             CMP      R0,#+0
   \                     ??emberAfScenesClusterCopySceneCallback_1: (+1)
   \       0x34   0xD07D             BEQ.N    ??emberAfScenesClusterCopySceneCallback_3
     70              status = EMBER_ZCL_STATUS_INVALID_FIELD;
     71              goto kickout;
     72            }
     73          
     74            for (i = 0; i < EMBER_AF_PLUGIN_SCENES_TABLE_SIZE; i++) {
   \                     ??emberAfScenesClusterCopySceneCallback_2: (+1)
   \       0x36   0xF04F 0x0B00      MOV      R11,#+0
   \       0x3A   0x....'....        LDR.W    R9,??DataTable2_1
   \       0x3E   0xF8DD 0x8080      LDR      R8,[SP, #+128]
     75              EmberAfSceneTableEntry from;
     76              emberAfPluginScenesServerRetrieveSceneEntry(from, i);
   \                     ??emberAfScenesClusterCopySceneCallback_4: (+1)
   \       0x42   0x2326             MOVS     R3,#+38
   \       0x44   0xFA5F 0xF28B      UXTB     R2,R11
   \       0x48   0x212C             MOVS     R1,#+44
   \       0x4A   0x4668             MOV      R0,SP
   \       0x4C   0x....'....        BL       halInternalGetTokenData
     77              if (from.endpoint == emberAfCurrentEndpoint()
     78                  && from.groupId == groupIdFrom
     79                  && (copyAllScenes || from.sceneId == sceneIdFrom)) {
   \       0x50   0x6829             LDR      R1,[R5, #+0]
   \       0x52   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \       0x56   0x680A             LDR      R2,[R1, #+0]
   \       0x58   0x7953             LDRB     R3,[R2, #+5]
   \       0x5A   0x4298             CMP      R0,R3
   \       0x5C   0xBF02             ITTT     EQ 
   \       0x5E   0xF8BD 0x0002      LDRHEQ   R0,[SP, #+2]
   \       0x62   0xF8BD 0x1054      LDRHEQ   R1,[SP, #+84]
   \       0x66   0x4288             CMPEQ    R0,R1
   \       0x68   0xD15A             BNE.N    ??emberAfScenesClusterCopySceneCallback_5
   \       0x6A   0xB92C             CBNZ.N   R4,??emberAfScenesClusterCopySceneCallback_6
   \       0x6C   0xF89D 0x0004      LDRB     R0,[SP, #+4]
   \       0x70   0xF89D 0x1058      LDRB     R1,[SP, #+88]
   \       0x74   0x4288             CMP      R0,R1
   \       0x76   0xD153             BNE.N    ??emberAfScenesClusterCopySceneCallback_5
     80                uint8_t j, index = EMBER_AF_SCENE_TABLE_NULL_INDEX;
   \                     ??emberAfScenesClusterCopySceneCallback_6: (+1)
   \       0x78   0x26FF             MOVS     R6,#+255
     81                for (j = 0; j < EMBER_AF_PLUGIN_SCENES_TABLE_SIZE; j++) {
   \       0x7A   0x2700             MOVS     R7,#+0
     82                  EmberAfSceneTableEntry to;
     83                  if (i == j) {
   \                     ??emberAfScenesClusterCopySceneCallback_7: (+1)
   \       0x7C   0xB2F8             UXTB     R0,R7
   \       0x7E   0x4583             CMP      R11,R0
   \       0x80   0xD020             BEQ.N    ??emberAfScenesClusterCopySceneCallback_8
     84                    continue;
     85                  }
     86                  emberAfPluginScenesServerRetrieveSceneEntry(to, j);
   \       0x82   0x2326             MOVS     R3,#+38
   \       0x84   0xB2FA             UXTB     R2,R7
   \       0x86   0x212C             MOVS     R1,#+44
   \       0x88   0xA80A             ADD      R0,SP,#+40
   \       0x8A   0x....'....        BL       halInternalGetTokenData
     87                  if (to.endpoint == emberAfCurrentEndpoint()
     88                      && to.groupId == groupIdTo
     89                      && to.sceneId == (copyAllScenes ? from.sceneId : sceneIdTo)) {
   \       0x8E   0x6829             LDR      R1,[R5, #+0]
   \       0x90   0xF89D 0x0028      LDRB     R0,[SP, #+40]
   \       0x94   0x680A             LDR      R2,[R1, #+0]
   \       0x96   0x7953             LDRB     R3,[R2, #+5]
   \       0x98   0x4298             CMP      R0,R3
   \       0x9A   0xBF04             ITT      EQ 
   \       0x9C   0xF8BD 0x002A      LDRHEQ   R0,[SP, #+42]
   \       0xA0   0x4550             CMPEQ    R0,R10
   \       0xA2   0xD108             BNE.N    ??emberAfScenesClusterCopySceneCallback_9
   \       0xA4   0x2C00             CMP      R4,#+0
   \       0xA6   0xF89D 0x102C      LDRB     R1,[SP, #+44]
   \       0xAA   0xBF14             ITE      NE 
   \       0xAC   0xF89D 0x0004      LDRBNE   R0,[SP, #+4]
   \       0xB0   0x4640             MOVEQ    R0,R8
   \       0xB2   0x4281             CMP      R1,R0
   \       0xB4   0xD03A             BEQ.N    ??emberAfScenesClusterCopySceneCallback_10
     90                    index = j;
     91                    break;
     92                  } else if (index == EMBER_AF_SCENE_TABLE_NULL_INDEX
     93                             && to.endpoint == EMBER_AF_SCENE_TABLE_UNUSED_ENDPOINT_ID) {
   \                     ??emberAfScenesClusterCopySceneCallback_9: (+1)
   \       0xB6   0xB2F0             UXTB     R0,R6
   \       0xB8   0x28FF             CMP      R0,#+255
   \       0xBA   0xBF02             ITTT     EQ 
   \       0xBC   0xF89D 0x0028      LDRBEQ   R0,[SP, #+40]
   \       0xC0   0x2800             CMPEQ    R0,#+0
   \       0xC2   0x463E             MOVEQ    R6,R7
     94                    index = j;
   \                     ??emberAfScenesClusterCopySceneCallback_8: (+1)
   \       0xC4   0x1C7F             ADDS     R7,R7,#+1
   \       0xC6   0xB2F9             UXTB     R1,R7
   \       0xC8   0x2902             CMP      R1,#+2
   \       0xCA   0xDDD7             BLE.N    ??emberAfScenesClusterCopySceneCallback_7
     95                  }
     96                }
     97          
     98                // If the target index is still zero, the table is full.
     99                if (index == EMBER_AF_SCENE_TABLE_NULL_INDEX) {
   \                     ??emberAfScenesClusterCopySceneCallback_11: (+1)
   \       0xCC   0xB2F0             UXTB     R0,R6
   \       0xCE   0x28FF             CMP      R0,#+255
   \       0xD0   0xD02E             BEQ.N    ??emberAfScenesClusterCopySceneCallback_12
    100                  status = EMBER_ZCL_STATUS_INSUFFICIENT_SPACE;
    101                  goto kickout;
    102                }
    103          
    104                // Save the "from" entry to the "to" index.  This makes a copy of "from"
    105                // with the correct group and scene ids and leaves the original in tact.
    106                from.groupId = groupIdTo;
   \       0xD2   0xF8AD 0xA002      STRH     R10,[SP, #+2]
    107                if (!copyAllScenes) {
   \       0xD6   0xB90C             CBNZ.N   R4,??emberAfScenesClusterCopySceneCallback_13
    108                  from.sceneId = sceneIdTo;
   \       0xD8   0xF88D 0x8004      STRB     R8,[SP, #+4]
    109                }
    110                emberAfPluginScenesServerSaveSceneEntry(from, index);
   \                     ??emberAfScenesClusterCopySceneCallback_13: (+1)
   \       0xDC   0x2326             MOVS     R3,#+38
   \       0xDE   0x466A             MOV      R2,SP
   \       0xE0   0xB2F1             UXTB     R1,R6
   \       0xE2   0x202C             MOVS     R0,#+44
   \       0xE4   0x....'....        BL       halInternalSetTokenData
    111          
    112                if (j != index) {
   \       0xE8   0xB2FF             UXTB     R7,R7
   \       0xEA   0xB2F6             UXTB     R6,R6
   \       0xEC   0x42B7             CMP      R7,R6
   \       0xEE   0xD015             BEQ.N    ??emberAfScenesClusterCopySceneCallback_14
    113                  emberAfPluginScenesServerIncrNumSceneEntriesInUse();
   \       0xF0   0x....'....        BL       ?Subroutine0
   \                     ??CrossCallReturnLabel_1: (+1)
   \       0xF4   0xF899 0x0000      LDRB     R0,[R9, #+0]
   \       0xF8   0x2301             MOVS     R3,#+1
   \       0xFA   0x464A             MOV      R2,R9
   \       0xFC   0x1C40             ADDS     R0,R0,#+1
   \       0xFE   0xF889 0x0000      STRB     R0,[R9, #+0]
   \      0x102   0x217F             MOVS     R1,#+127
   \      0x104   0x202B             MOVS     R0,#+43
   \      0x106   0x....'....        BL       halInternalSetTokenData
    114                  emberAfScenesSetSceneCountAttribute(emberAfCurrentEndpoint(),
    115                                                      emberAfPluginScenesServerNumSceneEntriesInUse());
   \      0x10A   0x....'....        BL       ?Subroutine0
    116                }
   \                     ??CrossCallReturnLabel_0: (+1)
   \      0x10E   0x6828             LDR      R0,[R5, #+0]
   \      0x110   0xF899 0x1000      LDRB     R1,[R9, #+0]
   \      0x114   0x6802             LDR      R2,[R0, #+0]
   \      0x116   0x7950             LDRB     R0,[R2, #+5]
   \      0x118   0x....'....        BL       emberAfScenesSetSceneCountAttribute
    117          
    118                // If we aren't copying all scenes, we can stop here.
    119                status = EMBER_ZCL_STATUS_SUCCESS;
   \                     ??emberAfScenesClusterCopySceneCallback_14: (+1)
   \      0x11C   0x2600             MOVS     R6,#+0
    120                if (!copyAllScenes) {
   \      0x11E   0xB144             CBZ.N    R4,??emberAfScenesClusterCopySceneCallback_3
   \                     ??emberAfScenesClusterCopySceneCallback_5: (+1)
   \      0x120   0xF10B 0x0B01      ADD      R11,R11,#+1
   \      0x124   0xF1BB 0x0F02      CMP      R11,#+2
   \      0x128   0xDD8B             BLE.N    ??emberAfScenesClusterCopySceneCallback_4
   \      0x12A   0xE002             B.N      ??emberAfScenesClusterCopySceneCallback_3
   \                     ??emberAfScenesClusterCopySceneCallback_10: (+1)
   \      0x12C   0x463E             MOV      R6,R7
   \      0x12E   0xE7CD             B.N      ??emberAfScenesClusterCopySceneCallback_11
   \                     ??emberAfScenesClusterCopySceneCallback_12: (+1)
   \      0x130   0x2689             MOVS     R6,#+137
    121                  goto kickout;
    122                }
    123              }
    124            }
    125          
    126            kickout:
    127            // Copy Scene commands are only responded to when they are addressed to a
    128            // single device.
    129            if (emberAfCurrentCommand()->type == EMBER_INCOMING_UNICAST
    130                || emberAfCurrentCommand()->type == EMBER_INCOMING_UNICAST_REPLY) {
   \                     ??emberAfScenesClusterCopySceneCallback_3: (+1)
   \      0x132   0x6828             LDR      R0,[R5, #+0]
   \      0x134   0x7900             LDRB     R0,[R0, #+4]
   \      0x136   0x2800             CMP      R0,#+0
   \      0x138   0xBF18             IT       NE 
   \      0x13A   0x2801             CMPNE    R0,#+1
   \      0x13C   0xD10E             BNE.N    ??emberAfScenesClusterCopySceneCallback_15
    131              emberAfFillCommandScenesClusterCopySceneResponse(status,
    132                                                               groupIdFrom,
    133                                                               sceneIdFrom);
   \      0x13E   0xF89D 0x0058      LDRB     R0,[SP, #+88]
   \      0x142   0xF8BD 0x1054      LDRH     R1,[SP, #+84]
   \      0x146   0x9002             STR      R0,[SP, #+8]
   \      0x148   0x....             LDR.N    R3,??DataTable2_2
   \      0x14A   0x9101             STR      R1,[SP, #+4]
   \      0x14C   0x9600             STR      R6,[SP, #+0]
   \      0x14E   0x2242             MOVS     R2,#+66
   \      0x150   0x2105             MOVS     R1,#+5
   \      0x152   0x2009             MOVS     R0,#+9
   \      0x154   0x....'....        BL       emberAfFillExternalBuffer
    134              sendStatus = emberAfSendResponse();
   \      0x158   0x....'....        BL       emberAfSendResponse
    135              if (EMBER_SUCCESS != sendStatus) {
    136                emberAfScenesClusterPrintln("Scenes: failed to send %s response: 0x%x",
    137                                            "copy_scene",
    138                                            sendStatus);
    139              }
    140            }
    141            return true;
   \                     ??emberAfScenesClusterCopySceneCallback_15: (+1)
   \      0x15C   0x2001             MOVS     R0,#+1
   \      0x15E   0xB017             ADD      SP,SP,#+92
   \      0x160   0xE8BD 0x8FF0      POP      {R4-R11,PC}      ;; return
    142          }

   \                                 In section .text, align 2, keep-with-next
   \                     ?Subroutine0: (+1)
   \        0x0   0x2301             MOVS     R3,#+1
   \        0x2   0x227F             MOVS     R2,#+127
   \        0x4   0x212B             MOVS     R1,#+43
   \        0x6   0x4648             MOV      R0,R9
   \        0x8   0x....'....        B.W      halInternalGetTokenData
    143          

   \                                 In section .text, align 2, keep-with-next
    144          EmberAfStatus emberAfPluginZllScenesServerRecallSceneZllExtensions(uint8_t endpoint)
    145          {
   \                     emberAfPluginZllScenesServerRecallSceneZllExtensions: (+1)
   \        0x0   0xB5E0             PUSH     {R5-R7,LR}
    146            bool globalSceneControl = true;
   \        0x2   0x2101             MOVS     R1,#+1
    147            EmberAfStatus status = emberAfWriteServerAttribute(endpoint,
    148                                                               ZCL_ON_OFF_CLUSTER_ID,
    149                                                               ZCL_GLOBAL_SCENE_CONTROL_ATTRIBUTE_ID,
    150                                                               (uint8_t *)&globalSceneControl,
    151                                                               ZCL_BOOLEAN_ATTRIBUTE_TYPE);
    152            if (status != EMBER_ZCL_STATUS_SUCCESS) {
    153              emberAfScenesClusterPrintln("ERR: writing global scene control %x", status);
    154            }
    155            return status;
   \        0x4   0x2210             MOVS     R2,#+16
   \        0x6   0xF88D 0x1004      STRB     R1,[SP, #+4]
   \        0xA   0x9200             STR      R2,[SP, #+0]
   \        0xC   0xAB01             ADD      R3,SP,#+4
   \        0xE   0xF44F 0x4280      MOV      R2,#+16384
   \       0x12   0x2106             MOVS     R1,#+6
   \       0x14   0x....'....        BL       emberAfWriteServerAttribute
   \       0x18   0xBD0E             POP      {R1-R3,PC}       ;; return
    156          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2:
   \        0x0   0x....'....        DC32     emAfCurrentCommand

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_1:
   \        0x0   0x....'....        DC32     emberAfPluginScenesServerEntriesInUse

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_2:
   \        0x0   0x....'....        DC32     ?_0

   \                                 In section .rodata, align 4
   \                     ?_0:
   \        0x0   0x75 0x76          DC8 "uvu"
   \              0x75 0x00    

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      16   emberAfPluginZllScenesServerRecallSceneZllExtensions
        16   -> emberAfWriteServerAttribute
     128   emberAfScenesClusterCopySceneCallback
       128   -> emberAfFillExternalBuffer
       128   -> emberAfGroupsClusterEndpointInGroupCallback
       128   -> emberAfScenesSetSceneCountAttribute
       128   -> emberAfSendResponse
       128   -> halInternalGetTokenData
       128   -> halInternalSetTokenData
      16   emberAfScenesClusterEnhancedAddSceneCallback
        16   -> emberAfPluginScenesServerParseAddScene
       0   emberAfScenesClusterEnhancedViewSceneCallback
         0   -> emberAfPluginScenesServerParseViewScene


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable2
       4  ??DataTable2_1
       4  ??DataTable2_2
      12  ?Subroutine0
       4  ?_0
      26  emberAfPluginZllScenesServerRecallSceneZllExtensions
     356  emberAfScenesClusterCopySceneCallback
      24  emberAfScenesClusterEnhancedAddSceneCallback
      12  emberAfScenesClusterEnhancedViewSceneCallback

 
   4 bytes in section .rodata
 442 bytes in section .text
 
 442 bytes of CODE  memory
   4 bytes of CONST memory

Errors: none
Warnings: none
