###############################################################################
#
# IAR ANSI C/C++ Compiler V8.32.2.178/W32 for ARM         14/Jun/2019  13:18:19
# Copyright 1999-2018 IAR Systems AB.
#
#    Cpu mode     =  
#    Endian       =  little
#    Source file  =  
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.6\platform\bootloader\api\btl_interface.c
#    Command line =  
#        -f C:\Users\alji\AppData\Local\Temp\EWD350.tmp
#        (C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.6\platform\bootloader\api\btl_interface.c
#        -D LOCAL_STORAGE_BTL -D CORTEXM3 -D CORTEXM3_EFR32 -D
#        CORTEXM3_EFR32_MICRO -D CORTEXM3_EFM32_MICRO -D
#        EFR32_SERIES2_CONFIG1_MICRO -D EFR32MG21 -D EFR32MG21A010F1024IM32 -D
#        "ATTRIBUTE_STORAGE_CONFIGURATION=\"z3_lite_timer_mg21_v660_endpoint_config.h\""
#        -D "CONFIGURATION_HEADER=\"app/framework/util/config.h\"" -D
#        "GENERATED_TOKEN_HEADER=\"z3_lite_timer_mg21_v660_tokens.h\"" -D
#        "PLATFORM_HEADER=\"platform/base/hal/micro/cortexm3/compiler/iar.h\""
#        -D "ZA_GENERATED_HEADER=\"z3_lite_timer_mg21_v660.h\"" -D
#        "__SOURCEFILE__=\"btl_interface.c\"" -D PSSTORE_SIZE=0 -D
#        LONGTOKEN_SIZE=0 -D LOCKBITS_IN_MAINFLASH_SIZE=8192 -D HAL_CONFIG=1 -D
#        EMBER_AF_USE_HWCONF -D LED_BLINK_PERIOD_MS=1000 -D NO_LED=1 -D
#        "EMBER_AF_API_EMBER_TYPES=\"stack/include/ember-types.h\"" -D
#        "EMBER_AF_API_DEBUG_PRINT=\"app/framework/util/print.h\"" -D
#        "EMBER_AF_API_AF_HEADER=\"app/framework/include/af.h\"" -D
#        "EMBER_AF_API_AF_SECURITY_HEADER=\"app/framework/security/af-security.h\""
#        -D EMBER_STACK_ZIGBEE -D
#        "MBEDTLS_CONFIG_FILE=\"mbedtls-config-generated.h\"" -D USE_NVM3 -D
#        NVM3_DEFAULT_NVM_SIZE=NVM3_FLASH_PAGES*FLASH_PAGE_SIZE -D
#        EMLIB_USER_CONFIG -D HAL_BULBPWM_ENABLE=1 -D
#        HAL_BULBPWM_FREQUENCY=1000 -D
#        "APPLICATION_TOKEN_HEADER=\"znet-token.h\"" -D
#        "APPLICATION_MFG_TOKEN_HEADER=\"znet-mfg-token.h\"" -D
#        "MBEDTLS_DEVICE_ACCELERATION_CONFIG_FILE=\"configs/config-device-acceleration.h\""
#        -D
#        "MBEDTLS_DEVICE_ACCELERATION_CONFIG_APP_FILE=\"config-device-acceleration-app.h\""
#        -D NVM3_FLASH_PAGES=4 -D NVM3_DEFAULT_CACHE_SIZE=200 -D
#        NVM3_MAX_OBJECT_SIZE=254 -D NVM3_DEFAULT_REPACK_HEADROOM=0 -D
#        PHY_RAIL=1 -lC
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\build\lst
#        --diag_suppress Pa050 -o
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\build\obj
#        --no_unroll --no_clustering --debug --endian=little
#        --cpu=Cortex-M33.no_dsp --cmse --no_path_in_file_macros
#        --separate_cluster_for_initialized_variables -e --fpu=None
#        --dlib_config "C:\Program Files (x86)\IAR Systems\Embedded Workbench
#        8.2\arm\inc\c\DLib_Config_Normal.h" -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.6\platform\bootloader\api\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\..\..\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\..\..\stack\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\..\util\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\protocol\zigbee\app\framework\include\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\plugin\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\micro\cortexm3\efm32\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\micro\cortexm3\efm32\config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\micro\cortexm3\efm32\efr32\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\CMSIS\Include\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\Device\SiliconLabs\efr32mg21\Include\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\common\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\dmadrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\gpiointerrupt\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\rtcdrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\sleep\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\spidrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\tempdrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\uartdrv\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emdrv\ustimer\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\emlib\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\middleware\glib\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\middleware\glib\glib\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\radio\rail_lib\plugin\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\radio\rail_lib\chip\efr32\rf\common\cortex\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\base\hal\..\..\radio\rail_lib\chip\efr32\rf\rfprotocol\ieee802154\cortex\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\halconfig\inc\hal-config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\hardware\module\config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\hardware\kit\common\halconfig\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\hardware\kit\common\bsp\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\hal-config\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\bootloader\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\emdrv\nvm3\inc\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\chip\efr32\efr32xg2x\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\common\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\plugin\coexistence\common\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\plugin\coexistence\hal\efr32\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\plugin\coexistence\protocol\ieee802154\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\protocol\ble\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\protocol\ieee802154\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\platform\radio\rail_lib\protocol\zwave\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\plugin\plugin-common\mbedtls\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\third_party\mbedtls\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\third_party\mbedtls\include\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\third_party\mbedtls\include\mbedtls\
#        -I
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\..\..\v2.6\util\third_party\mbedtls\sl_crypto\include\
#        -Ohz --use_c++_inline)
#    Locale       =  C
#    List file    =  
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\build\lst\btl_interface.lst
#    Object file  =  
#        C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.5\z3_lite_timer_mg21_v660\build\obj\btl_interface.o
#
###############################################################################

C:\SiliconLabs\SimplicityStudio\v4\developer\sdks\gecko_sdk_suite\v2.6\platform\bootloader\api\btl_interface.c
      1          /***************************************************************************//**
      2           * @file
      3           * @brief Application interface to the bootloader.
      4           *******************************************************************************
      5           * # License
      6           * <b>Copyright 2018 Silicon Laboratories Inc. www.silabs.com</b>
      7           *******************************************************************************
      8           *
      9           * The licensor of this software is Silicon Laboratories Inc.  Your use of this
     10           * software is governed by the terms of Silicon Labs Master Software License
     11           * Agreement (MSLA) available at
     12           * www.silabs.com/about-us/legal/master-software-license-agreement.  This
     13           * software is distributed to you in Source Code format and is governed by the
     14           * sections of the MSLA applicable to Source Code.
     15           *
     16           ******************************************************************************/
     17          
     18          #include "btl_interface.h"
     19          #include "em_core.h"
     20          

   \                                 In section .bss, align 1
     21          static bool isInitialized = false;
   \                     isInitialized:
   \        0x0                      DS8 1
     22          

   \                                 In section .text, align 2, keep-with-next
     23          void bootloader_getInfo(BootloaderInformation_t *info)
     24          {
   \                     bootloader_getInfo: (+1)
   \        0x0   0xB510             PUSH     {R4,LR}
     25          #if defined(BOOTLOADER_HAS_FIRST_STAGE)
     26            if (!bootloader_pointerToFirstStageValid(firstBootloaderTable)
     27                || !bootloader_pointerValid(mainBootloaderTable)) {
     28              // No bootloader is present (first stage or main stage invalid)
     29              info->type = NO_BOOTLOADER;
     30              info->capabilities = 0;
     31            } else if ((firstBootloaderTable->header.type == BOOTLOADER_MAGIC_FIRST_STAGE)
     32                       && (mainBootloaderTable->header.type == BOOTLOADER_MAGIC_MAIN)) {
     33              info->type = SL_BOOTLOADER;
     34              info->version = mainBootloaderTable->header.version;
     35              info->capabilities = mainBootloaderTable->capabilities;
     36            } else {
     37              info->type = NO_BOOTLOADER;
     38              info->capabilities = 0;
     39            }
     40          #else
     41            if (!bootloader_pointerValid(mainBootloaderTable)) {
   \        0x2   0x2128             MOVS     R1,#+40
   \        0x4   0x680A             LDR      R2,[R1, #+0]
   \        0x6   0xF5B2 0x4F80      CMP      R2,#+16384
   \        0xA   0xD20B             BCS.N    ??bootloader_getInfo_0
     42              // No bootloader is present (first stage or main stage invalid)
     43              info->type = NO_BOOTLOADER;
     44              info->capabilities = 0;
     45            } else if (mainBootloaderTable->header.type == BOOTLOADER_MAGIC_MAIN) {
   \        0xC   0x6812             LDR      R2,[R2, #+0]
   \        0xE   0x....             LDR.N    R3,??DataTable3  ;; 0x5ecdb007
   \       0x10   0x429A             CMP      R2,R3
   \       0x12   0xD107             BNE.N    ??bootloader_getInfo_0
     46              info->type = SL_BOOTLOADER;
   \       0x14   0x2401             MOVS     R4,#+1
   \       0x16   0x7004             STRB     R4,[R0, #+0]
     47              info->version = mainBootloaderTable->header.version;
   \       0x18   0x680A             LDR      R2,[R1, #+0]
   \       0x1A   0x6893             LDR      R3,[R2, #+8]
   \       0x1C   0x6043             STR      R3,[R0, #+4]
     48              info->capabilities = mainBootloaderTable->capabilities;
   \       0x1E   0x6809             LDR      R1,[R1, #+0]
   \       0x20   0x6989             LDR      R1,[R1, #+24]
   \       0x22   0xE001             B.N      ??bootloader_getInfo_1
     49            } else {
     50              info->type = NO_BOOTLOADER;
   \                     ??bootloader_getInfo_0: (+1)
   \       0x24   0x2100             MOVS     R1,#+0
   \       0x26   0x7001             STRB     R1,[R0, #+0]
     51              info->capabilities = 0;
   \                     ??bootloader_getInfo_1: (+1)
   \       0x28   0x6081             STR      R1,[R0, #+8]
     52            }
     53          #endif
     54          }
   \       0x2A   0xBD10             POP      {R4,PC}          ;; return
     55          

   \                                 In section .text, align 2, keep-with-next
     56          int32_t bootloader_init(void)
     57          {
   \                     bootloader_init: (+1)
   \        0x0   0xB538             PUSH     {R3-R5,LR}
     58            int32_t retVal;
     59            bool isInitializedTemp;
     60          
     61            if (!bootloader_pointerValid(mainBootloaderTable)) {
   \        0x2   0x2428             MOVS     R4,#+40
   \        0x4   0x6820             LDR      R0,[R4, #+0]
   \        0x6   0xF5B0 0x4F80      CMP      R0,#+16384
   \        0xA   0xD20D             BCS.N    ??bootloader_init_0
     62              return BOOTLOADER_ERROR_INIT_TABLE;
     63            }
     64          
     65            CORE_DECLARE_IRQ_STATE;
     66            CORE_ENTER_ATOMIC();
   \        0xC   0x....'....        BL       CORE_EnterAtomic
     67            isInitializedTemp = isInitialized;
   \       0x10   0x....             LDR.N    R1,??DataTable3_1
   \       0x12   0x780D             LDRB     R5,[R1, #+0]
     68            isInitialized = true;
   \       0x14   0x2201             MOVS     R2,#+1
   \       0x16   0x700A             STRB     R2,[R1, #+0]
     69            CORE_EXIT_ATOMIC();
   \       0x18   0x....'....        BL       CORE_ExitAtomic
     70          
     71            if (isInitializedTemp == false) {
   \       0x1C   0xB92D             CBNZ.N   R5,??bootloader_init_1
     72              retVal = mainBootloaderTable->init();
   \       0x1E   0x6820             LDR      R0,[R4, #+0]
   \       0x20   0x69C1             LDR      R1,[R0, #+28]
   \       0x22   0xE8BD 0x4031      POP      {R0,R4,R5,LR}
   \       0x26   0x4708             BX       R1
     73            } else {
   \                     ??bootloader_init_0: (+1)
   \       0x28   0x....             B.N      ?Subroutine0
     74              retVal = BOOTLOADER_OK;
   \                     ??bootloader_init_1: (+1)
   \       0x2A   0x2000             MOVS     R0,#+0
     75            }
     76            return retVal;
   \       0x2C   0xBD32             POP      {R1,R4,R5,PC}    ;; return
     77          }

   \                                 In section .text, align 2, keep-with-next
   \                     ?Subroutine0: (+1)
   \        0x0   0xF44F 0x7081      MOV      R0,#+258
   \        0x4   0xBD32             POP      {R1,R4,R5,PC}
     78          

   \                                 In section .text, align 2, keep-with-next
     79          int32_t bootloader_deinit(void)
     80          {
   \                     bootloader_deinit: (+1)
   \        0x0   0xB538             PUSH     {R3-R5,LR}
     81            int32_t retVal;
     82            bool isInitializedTemp;
     83          
     84            if (!bootloader_pointerValid(mainBootloaderTable)) {
   \        0x2   0x2428             MOVS     R4,#+40
   \        0x4   0x6820             LDR      R0,[R4, #+0]
   \        0x6   0xF5B0 0x4F80      CMP      R0,#+16384
   \        0xA   0xD20E             BCS.N    ??bootloader_deinit_0
     85              return BOOTLOADER_ERROR_INIT_TABLE;
     86            }
     87          
     88            CORE_DECLARE_IRQ_STATE;
     89            CORE_ENTER_ATOMIC();
   \        0xC   0x....'....        BL       CORE_EnterAtomic
     90            isInitializedTemp = isInitialized;
   \       0x10   0x....             LDR.N    R1,??DataTable3_1
   \       0x12   0x780D             LDRB     R5,[R1, #+0]
     91            isInitialized = false;
   \       0x14   0x2200             MOVS     R2,#+0
   \       0x16   0x700A             STRB     R2,[R1, #+0]
     92            CORE_EXIT_ATOMIC();
   \       0x18   0x....'....        BL       CORE_ExitAtomic
     93          
     94            if (isInitializedTemp == true) {
   \       0x1C   0x2D01             CMP      R5,#+1
   \       0x1E   0xD105             BNE.N    ??bootloader_deinit_1
     95              retVal = mainBootloaderTable->deinit();
   \       0x20   0x6820             LDR      R0,[R4, #+0]
   \       0x22   0x6A01             LDR      R1,[R0, #+32]
   \       0x24   0xE8BD 0x4031      POP      {R0,R4,R5,LR}
   \       0x28   0x4708             BX       R1
     96            } else {
   \                     ??bootloader_deinit_0: (+1)
   \       0x2A   0x....             B.N      ?Subroutine0
     97              retVal = BOOTLOADER_OK;
   \                     ??bootloader_deinit_1: (+1)
   \       0x2C   0x2000             MOVS     R0,#+0
     98            }
     99            return retVal;
   \       0x2E   0xBD32             POP      {R1,R4,R5,PC}    ;; return
    100          }
    101          

   \                                 In section .text, align 2, keep-with-next
    102          void bootloader_rebootAndInstall(void)
    103          {
    104            // Set reset reason to bootloader entry
    105            BootloaderResetCause_t* resetCause = (BootloaderResetCause_t*) (RAM_MEM_BASE);
    106            resetCause->reason = BOOTLOADER_RESET_REASON_BOOTLOAD;
   \                     bootloader_rebootAndInstall: (+1)
   \        0x0   0xF04F 0x5000      MOV      R0,#+536870912
   \        0x4   0xF240 0x2102      MOVW     R1,#+514
    107            resetCause->signature = BOOTLOADER_RESET_SIGNATURE_VALID;
   \        0x8   0xF24F 0x020F      MOVW     R2,#+61455
   \        0xC   0x8001             STRH     R1,[R0, #+0]
   \        0xE   0x8042             STRH     R2,[R0, #+2]
    108          #if defined(RMU_PRESENT)
    109            // Clear resetcause
    110            RMU->CMD = RMU_CMD_RCCLR;
    111            // Trigger a software system reset
    112            RMU->CTRL = (RMU->CTRL & ~_RMU_CTRL_SYSRMODE_MASK) | RMU_CTRL_SYSRMODE_FULL;
    113          #endif
    114            NVIC_SystemReset();
   \       0x10   0xF3BF 0x8F4F      DSB      SY
   \       0x14   0x....             LDR.N    R1,??DataTable3_2  ;; 0xe000ed0c
   \       0x16   0x680A             LDR      R2,[R1, #+0]
   \       0x18   0x....             LDR.N    R0,??DataTable3_3  ;; 0x5fa0004
   \       0x1A   0xF402 0x62E0      AND      R2,R2,#0x700
   \       0x1E   0x4302             ORRS     R2,R0,R2
   \       0x20   0x600A             STR      R2,[R1, #+0]
   \       0x22   0xF3BF 0x8F4F      DSB      SY
   \                     ??bootloader_rebootAndInstall_0: (+1)
   \       0x26   0xBF00             Nop      
   \       0x28   0xE7FD             B.N      ??bootloader_rebootAndInstall_0
    115          }
    116          

   \                                 In section .text, align 2, keep-with-next
    117          int32_t bootloader_initParser(BootloaderParserContext_t *context,
    118                                        size_t                    contextSize)
    119          {
    120            if (!bootloader_pointerValid(mainBootloaderTable)) {
   \                     bootloader_initParser: (+1)
   \        0x0   0x2228             MOVS     R2,#+40
   \        0x2   0x6812             LDR      R2,[R2, #+0]
   \        0x4   0xF5B2 0x4F80      CMP      R2,#+16384
   \        0x8   0xBF3C             ITT      CC 
    121              return BOOTLOADER_ERROR_PARSE_FAILED;
    122            }
    123            return mainBootloaderTable->initParser(context, contextSize);
   \        0xA   0x6A92             LDRCC    R2,[R2, #+40]
   \        0xC   0x4710             BXCC     R2
   \        0xE   0xF240 0x2002      MOVW     R0,#+514
   \       0x12   0x4770             BX       LR               ;; return
    124          }
    125          

   \                                 In section .text, align 2, keep-with-next
    126          int32_t bootloader_parseBuffer(BootloaderParserContext_t   *context,
    127                                         BootloaderParserCallbacks_t *callbacks,
    128                                         uint8_t                     data[],
    129                                         size_t                      numBytes)
    130          {
   \                     bootloader_parseBuffer: (+1)
   \        0x0   0xB510             PUSH     {R4,LR}
    131            if (!bootloader_pointerValid(mainBootloaderTable)) {
   \        0x2   0x2428             MOVS     R4,#+40
   \        0x4   0x6824             LDR      R4,[R4, #+0]
   \        0x6   0xF5B4 0x4F80      CMP      R4,#+16384
   \        0xA   0xD202             BCS.N    ??bootloader_parseBuffer_0
    132              return BOOTLOADER_ERROR_PARSE_FAILED;
    133            }
    134            return mainBootloaderTable->parseBuffer(context, callbacks, data, numBytes);
   \        0xC   0x6AE4             LDR      R4,[R4, #+44]
   \        0xE   0x47A0             BLX      R4
   \       0x10   0xBD10             POP      {R4,PC}
   \                     ??bootloader_parseBuffer_0: (+1)
   \       0x12   0xF240 0x2002      MOVW     R0,#+514
   \       0x16   0xBD10             POP      {R4,PC}          ;; return
    135          }
    136          

   \                                 In section .text, align 2, keep-with-next
    137          bool bootloader_verifyApplication(uint32_t startAddress)
    138          {
    139            if (!bootloader_pointerValid(mainBootloaderTable)) {
   \                     bootloader_verifyApplication: (+1)
   \        0x0   0x2128             MOVS     R1,#+40
   \        0x2   0x6809             LDR      R1,[R1, #+0]
   \        0x4   0xF5B1 0x4F80      CMP      R1,#+16384
   \        0x8   0xBF3C             ITT      CC 
    140              return false;
    141            }
    142            return mainBootloaderTable->verifyApplication(startAddress);
   \        0xA   0x6A49             LDRCC    R1,[R1, #+36]
   \        0xC   0x4708             BXCC     R1
   \        0xE   0x2000             MOVS     R0,#+0
   \       0x10   0x4770             BX       LR               ;; return
    143          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3:
   \        0x0   0x5ECD'B007        DC32     0x5ecdb007

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_1:
   \        0x0   0x....'....        DC32     isInitialized

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_2:
   \        0x0   0xE000'ED0C        DC32     0xe000ed0c

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_3:
   \        0x0   0x05FA'0004        DC32     0x5fa0004

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      16   bootloader_deinit
         0   -- Indirect call
        16   -> CORE_EnterAtomic
        16   -> CORE_ExitAtomic
       8   bootloader_getInfo
      16   bootloader_init
         0   -- Indirect call
        16   -> CORE_EnterAtomic
        16   -> CORE_ExitAtomic
       0   bootloader_initParser
         0   -- Indirect call
       8   bootloader_parseBuffer
         8   -- Indirect call
       0   bootloader_rebootAndInstall
       0   bootloader_verifyApplication
         0   -- Indirect call


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable3
       4  ??DataTable3_1
       4  ??DataTable3_2
       4  ??DataTable3_3
       6  ?Subroutine0
      48  bootloader_deinit
      44  bootloader_getInfo
      46  bootloader_init
      20  bootloader_initParser
      24  bootloader_parseBuffer
      42  bootloader_rebootAndInstall
      18  bootloader_verifyApplication
       1  isInitialized

 
   1 byte  in section .bss
 264 bytes in section .text
 
 264 bytes of CODE memory
   1 byte  of DATA memory

Errors: none
Warnings: none
